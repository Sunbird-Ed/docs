<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>sunbirded-mobile-app documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top d-block d-sm-none">
            <a href="../" class="navbar-brand">sunbirded-mobile-app documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">








<ol class="breadcrumb">
  <li class="breadcrumb-item">Injectables</li>
  <li class="breadcrumb-item" >AttachmentService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/manage-learn/core/services/attachment/attachment.service.ts</code>
        </p>





            <section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#actionSheetOpen" >actionSheetOpen</a>
                            </li>
                            <li>
                                <a href="#mediaType" >mediaType</a>
                            </li>
                            <li>
                                <a href="#payload" >payload</a>
                            </li>
                            <li>
                                <a href="#storagePath" >storagePath</a>
                            </li>
                            <li>
                                <a href="#texts" >texts</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#checkForFileSizeRestriction" >checkForFileSizeRestriction</a>
                            </li>
                            <li>
                                <a href="#copyFile" >copyFile</a>
                            </li>
                            <li>
                                <a href="#copyFileToLocalDir" >copyFileToLocalDir</a>
                            </li>
                            <li>
                                <a href="#createFileName" >createFileName</a>
                            </li>
                            <li>
                                <a href="#deleteFile" >deleteFile</a>
                            </li>
                            <li>
                                <a href="#directoryPath" >directoryPath</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#evidenceUpload" >evidenceUpload</a>
                            </li>
                            <li>
                                <a href="#mimeType" >mimeType</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#openAllFile" >openAllFile</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#openAttachmentSource" >openAttachmentSource</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#openFile" >openFile</a>
                            </li>
                            <li>
                                <a href="#openLocalLibrary" >openLocalLibrary</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#presentToast" >presentToast</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#selectImage" >selectImage</a>
                            </li>
                            <li>
                                <a href="#takePicture" >takePicture</a>
                            </li>
                            <li>
                                <a href="#writeFileToPrivateFolder" >writeFileToPrivateFolder</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section data-compodoc="block-constructor">
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(camera: Camera, file: File, actionSheetController: ActionSheetController, toastController: ToastController, platform: Platform, filePath: FilePath, chooser: Chooser, translate: TranslateService, loader: <a href="../injectables/LoaderService.html" target="_self">LoaderService</a>, imgPicker: ImagePicker)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="21" class="link-to-prism">src/app/manage-learn/core/services/attachment/attachment.service.ts:21</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>camera</td>
                                                  
                                                        <td>
                                                                    <code>Camera</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>file</td>
                                                  
                                                        <td>
                                                                    <code>File</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>actionSheetController</td>
                                                  
                                                        <td>
                                                                    <code>ActionSheetController</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>toastController</td>
                                                  
                                                        <td>
                                                                    <code>ToastController</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>platform</td>
                                                  
                                                        <td>
                                                                    <code>Platform</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>filePath</td>
                                                  
                                                        <td>
                                                                    <code>FilePath</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>chooser</td>
                                                  
                                                        <td>
                                                                    <code>Chooser</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>translate</td>
                                                  
                                                        <td>
                                                                    <code>TranslateService</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>loader</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/LoaderService.html" target="_self" >LoaderService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>imgPicker</td>
                                                  
                                                        <td>
                                                                    <code>ImagePicker</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section data-compodoc="block-methods">
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="checkForFileSizeRestriction"></a>
                    <span class="name">
                        <span ><b>checkForFileSizeRestriction</b></span>
                        <a href="#checkForFileSizeRestriction"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>checkForFileSizeRestriction(filePath)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="222"
                            class="link-to-prism">src/app/manage-learn/core/services/attachment/attachment.service.ts:222</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>filePath</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;Boolean&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="copyFile"></a>
                    <span class="name">
                        <span ><b>copyFile</b></span>
                        <a href="#copyFile"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>copyFile(filePath)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="296"
                            class="link-to-prism">src/app/manage-learn/core/services/attachment/attachment.service.ts:296</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>filePath</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="copyFileToLocalDir"></a>
                    <span class="name">
                        <span ><b>copyFileToLocalDir</b></span>
                        <a href="#copyFileToLocalDir"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>copyFileToLocalDir(namePath, currentName, newFileName, completeFilePath)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="239"
                            class="link-to-prism">src/app/manage-learn/core/services/attachment/attachment.service.ts:239</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>namePath</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>currentName</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>newFileName</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>completeFilePath</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createFileName"></a>
                    <span class="name">
                        <span ><b>createFileName</b></span>
                        <a href="#createFileName"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>createFileName(name)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="303"
                            class="link-to-prism">src/app/manage-learn/core/services/attachment/attachment.service.ts:303</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>name</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="deleteFile"></a>
                    <span class="name">
                        <span ><b>deleteFile</b></span>
                        <a href="#deleteFile"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>deleteFile(fileName)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="327"
                            class="link-to-prism">src/app/manage-learn/core/services/attachment/attachment.service.ts:327</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>fileName</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="directoryPath"></a>
                    <span class="name">
                        <span ><b>directoryPath</b></span>
                        <a href="#directoryPath"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>directoryPath()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="311"
                            class="link-to-prism">src/app/manage-learn/core/services/attachment/attachment.service.ts:311</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="evidenceUpload"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>evidenceUpload</b></span>
                        <a href="#evidenceUpload"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>evidenceUpload(path?)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="99"
                            class="link-to-prism">src/app/manage-learn/core/services/attachment/attachment.service.ts:99</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>path</td>

                                    <td>
                                        Yes
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>unknown</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="mimeType"></a>
                    <span class="name">
                        <span ><b>mimeType</b></span>
                        <a href="#mimeType"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>mimeType(fileName)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="322"
                            class="link-to-prism">src/app/manage-learn/core/services/attachment/attachment.service.ts:322</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>fileName</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="openAllFile"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>openAllFile</b></span>
                        <a href="#openAllFile"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>openAllFile(path?)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="360"
                            class="link-to-prism">src/app/manage-learn/core/services/attachment/attachment.service.ts:360</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>path</td>

                                    <td>
                                        Yes
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="openAttachmentSource"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>openAttachmentSource</b></span>
                        <a href="#openAttachmentSource"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>openAttachmentSource(type, payload)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="331"
                            class="link-to-prism">src/app/manage-learn/core/services/attachment/attachment.service.ts:331</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>type</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>payload</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="openFile"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>openFile</b></span>
                        <a href="#openFile"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>openFile(path?)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="268"
                            class="link-to-prism">src/app/manage-learn/core/services/attachment/attachment.service.ts:268</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>path</td>

                                    <td>
                                        Yes
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="openLocalLibrary"></a>
                    <span class="name">
                        <span ><b>openLocalLibrary</b></span>
                        <a href="#openLocalLibrary"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>openLocalLibrary()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="347"
                            class="link-to-prism">src/app/manage-learn/core/services/attachment/attachment.service.ts:347</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="presentToast"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>presentToast</b></span>
                        <a href="#presentToast"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>presentToast(text, color: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, duration: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="258"
                            class="link-to-prism">src/app/manage-learn/core/services/attachment/attachment.service.ts:258</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>text</td>
                                    <td>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>color</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>&quot;danger&quot;</code>
                                    </td>

                                </tr>
                                <tr>
                                    <td>duration</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>3000</code>
                                    </td>

                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="selectImage"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>selectImage</b></span>
                        <a href="#selectImage"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>selectImage(path?)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="57"
                            class="link-to-prism">src/app/manage-learn/core/services/attachment/attachment.service.ts:57</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>path</td>

                                    <td>
                                        Yes
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>unknown</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="takePicture"></a>
                    <span class="name">
                        <span ><b>takePicture</b></span>
                        <a href="#takePicture"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>takePicture(sourceType: PictureSourceType, mediaType: MediaType)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="148"
                            class="link-to-prism">src/app/manage-learn/core/services/attachment/attachment.service.ts:148</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>sourceType</td>
                                    <td>
                                            <code>PictureSourceType</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>mediaType</td>
                                    <td>
                                            <code>MediaType</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>this.camera.MediaType.ALLMEDIA</code>
                                    </td>

                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="writeFileToPrivateFolder"></a>
                    <span class="name">
                        <span ><b>writeFileToPrivateFolder</b></span>
                        <a href="#writeFileToPrivateFolder"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>writeFileToPrivateFolder(filePath)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="191"
                            class="link-to-prism">src/app/manage-learn/core/services/attachment/attachment.service.ts:191</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>filePath</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section data-compodoc="block-properties">
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="actionSheetOpen"></a>
                    <span class="name">
                        <span ><b>actionSheetOpen</b></span>
                        <a href="#actionSheetOpen"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>false</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="20" class="link-to-prism">src/app/manage-learn/core/services/attachment/attachment.service.ts:20</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="mediaType"></a>
                    <span class="name">
                        <span ><b>mediaType</b></span>
                        <a href="#mediaType"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="17" class="link-to-prism">src/app/manage-learn/core/services/attachment/attachment.service.ts:17</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="payload"></a>
                    <span class="name">
                        <span ><b>payload</b></span>
                        <a href="#payload"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="19" class="link-to-prism">src/app/manage-learn/core/services/attachment/attachment.service.ts:19</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="storagePath"></a>
                    <span class="name">
                        <span ><b>storagePath</b></span>
                        <a href="#storagePath"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="21" class="link-to-prism">src/app/manage-learn/core/services/attachment/attachment.service.ts:21</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="texts"></a>
                    <span class="name">
                        <span ><b>texts</b></span>
                        <a href="#texts"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="18" class="link-to-prism">src/app/manage-learn/core/services/attachment/attachment.service.ts:18</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable } from &quot;@angular/core&quot;;
import { Camera, CameraOptions, MediaType, PictureSourceType } from &quot;@ionic-native/camera/ngx&quot;;
import { Chooser } from &quot;@ionic-native/chooser/ngx&quot;;
import { FilePath } from &quot;@ionic-native/file-path/ngx&quot;;
import { File } from &quot;@ionic-native/file/ngx&quot;;
import { ActionSheetController, Platform, ToastController } from &quot;@ionic/angular&quot;;
import { TranslateService } from &quot;@ngx-translate/core&quot;;
import { FILE_EXTENSION_HEADERS } from &quot;../../constants&quot;;
import { localStorageConstants } from &quot;../../constants/localStorageConstants&quot;;
import { LoaderService } from &quot;../loader/loader.service&quot;;
import { ImagePicker, ImagePickerOptions } from &#x27;@ionic-native/image-picker/ngx&#x27;;

@Injectable({
  providedIn: &#x27;root&#x27;
})
export class AttachmentService {
  mediaType: string;
  texts: any;
  payload: any;
  actionSheetOpen: boolean &#x3D; false;
  storagePath;
  constructor(
    private camera: Camera,
    private file: File,
    private actionSheetController: ActionSheetController,
    private toastController: ToastController,
    private platform: Platform,
    private filePath: FilePath,
    private chooser: Chooser,
    // private filePickerIOS: IOSFilePicker,
    private translate: TranslateService,
    private loader: LoaderService,
    private imgPicker: ImagePicker,

  ) {
    this.translate
      .get([
        &quot;FRMELEMNTS_MSG_SELECT_IMAGE_SOURCE&quot;,
        &quot;FRMELEMNTS_MSG_LOAD_FROM_LIBRARY&quot;,
        &quot;FRMELEMNTS_MSG_USE_CAMERA&quot;,
        &quot;FRMELEMNTS_MSG_USE_FILE&quot;,
        &quot;CANCEL&quot;,
        &quot;FRMELEMNTS_MSG_ERROR_WHILE_STORING_FILE&quot;,
        &quot;FRMELEMNTS_MSG_SUCCESSFULLY_ATTACHED&quot;,
        &quot;FRMELEMNTS_MSG_ERROR_FILE_SIZE_LIMIT&quot;,
        &quot;FRMELEMNTS_LBL_FILE_SIZE_EXCEEDED&quot;,
        &quot;FRMELEMENTS_LBL_CAMERA&quot;,
        &quot;FRMELEMENTS_LBL_UPLOAD_IMAGE&quot;,
        &quot;FRMELEMENTS_LBL_UPLOAD_FILE&quot;,
        &quot;FRMELEMENTS_LBL_UPLOAD_VIDEO&quot;
      ])
      .subscribe((data) &#x3D;&gt; {
        this.texts &#x3D; data;
      });
  }

  async selectImage(path?) {
    this.actionSheetOpen &#x3D; true;
    this.storagePath &#x3D; path;
    const actionSheet &#x3D; await this.actionSheetController.create({
      header: this.texts[&quot;FRMELEMNTS_MSG_SELECT_IMAGE_SOURCE&quot;],
      cssClass: &#x27;sb-popover&#x27;,
      buttons: [
        {
          text: this.texts[&quot;FRMELEMNTS_MSG_LOAD_FROM_LIBRARY&quot;],
          handler: () &#x3D;&gt; {
            this.takePicture(this.camera.PictureSourceType.PHOTOLIBRARY);
            return false;
          },
        },
        {
          text: this.texts[&quot;FRMELEMNTS_MSG_USE_CAMERA&quot;],
          icon: &quot;camera&quot;,
          handler: () &#x3D;&gt; {
            this.takePicture(this.camera.PictureSourceType.CAMERA);
            return false;
          },
        },
        {
          text: this.texts[&quot;FRMELEMNTS_MSG_USE_FILE&quot;],
          handler: () &#x3D;&gt; {
            console.log(path,&quot;oath&quot;);
            path ? this.openLocalLibrary() : this.openFile();
            return false;
          },
        },
        {
          text: this.texts[&quot;CANCEL&quot;],
          role: &quot;cancel&quot;,
        },
      ],
    });
    await actionSheet.present();
    return actionSheet.onDidDismiss();
  }


// Evidence upload for survey and observation
  async evidenceUpload(path?) {
    this.actionSheetOpen &#x3D; true;
    this.storagePath &#x3D; path;
    const actionSheet &#x3D; await this.actionSheetController.create({
      header: this.texts[&quot;FRMELEMNTS_MSG_SELECT_IMAGE_SOURCE&quot;],
      cssClass: &#x27;sb-popover&#x27;,
      buttons: [
        {
          text: this.texts[&quot;FRMELEMENTS_LBL_CAMERA&quot;],
          icon: &quot;camera&quot;,
          handler: () &#x3D;&gt; {
            this.takePicture(this.camera.PictureSourceType.CAMERA);
            return false;
          },
        },
        {
          text: this.texts[&quot;FRMELEMENTS_LBL_UPLOAD_IMAGE&quot;],
          icon: &quot;cloud-upload&quot;,
          handler: () &#x3D;&gt; {
            this.openLocalLibrary()
            return false;
          },
        },
        {
          text: this.texts[&quot;FRMELEMENTS_LBL_UPLOAD_VIDEO&quot;],
          icon: &quot;videocam&quot;,
          handler: () &#x3D;&gt; {
            this.takePicture(this.camera.PictureSourceType.PHOTOLIBRARY, this.camera.MediaType.VIDEO);
            return false;
          },
        },
        {
          text: this.texts[&quot;FRMELEMENTS_LBL_UPLOAD_FILE&quot;],
          icon: &quot;document&quot;,
          handler: () &#x3D;&gt; {
            // this.openAllFile()
            this.openFile();
            return false;
          },
        },
        {
          text: this.texts[&quot;CANCEL&quot;],
          role: &quot;cancel&quot;,
        },
      ],
    });
    await actionSheet.present();
    return actionSheet.onDidDismiss();
  }
  takePicture(sourceType: PictureSourceType, mediaType: MediaType &#x3D; this.camera.MediaType.ALLMEDIA) {
    var options: CameraOptions &#x3D; {
      quality: 20,
      sourceType: sourceType,
      saveToPhotoAlbum: false,
      correctOrientation: true,
      mediaType: mediaType,
      destinationType: this.camera.DestinationType.FILE_URI
    };

    this.camera
      .getPicture(options)
      .then((imagePath) &#x3D;&gt; {
        if (this.platform.is(&quot;android&quot;) &amp;&amp; sourceType &#x3D;&#x3D;&#x3D; this.camera.PictureSourceType.PHOTOLIBRARY) {
          let newFilePath &#x3D; imagePath;
          if (!newFilePath.includes(&quot;file://&quot;)) {
            newFilePath &#x3D; &quot;file://&quot; + imagePath
          }
            this.checkForFileSizeRestriction(newFilePath).then(isValidFile &#x3D;&gt; {
              if (isValidFile) {
                this.filePath
                  .resolveNativePath(newFilePath)
                  .then((filePath) &#x3D;&gt; {
                    this.copyFile(filePath);
                  })
                  .catch(error &#x3D;&gt; { })
              }
            })
        } else {
          this.checkForFileSizeRestriction(imagePath).then(isValidFile &#x3D;&gt; {
            if (isValidFile) {
              this.copyFile(imagePath);
            }
          })
        }
      })
      .catch((err) &#x3D;&gt; {
        if (err !&#x3D;&#x3D; &quot;No Image Selected&quot;) {
          this.presentToast(this.texts[&quot;FRMELEMNTS_MSG_ERROR_WHILE_STORING_FILE&quot;]);
        }
      });
  }

  writeFileToPrivateFolder(filePath) {
    this.checkForFileSizeRestriction(filePath).then(isValidFile &#x3D;&gt; {
      if (isValidFile) {
        this.loader.startLoader();
        let path &#x3D; filePath.substr(0, filePath.lastIndexOf(&quot;/&quot;) + 1);
        let currentName &#x3D; filePath.split(&quot;/&quot;).pop();
        this.file.readAsArrayBuffer(path, currentName).then(success &#x3D;&gt; {
          const pathToWrite &#x3D; this.directoryPath();
          const newFileName &#x3D; this.createFileName(currentName)
          this.file.writeFile(pathToWrite, newFileName, success).then(async fileWrite &#x3D;&gt; {
            const data &#x3D; {
              name: newFileName,
              type: this.mimeType(newFileName),
              isUploaded: false,
              url: &quot;&quot;,
            };
            await this.loader.stopLoader();
            this.presentToast(this.texts[&quot;FRMELEMNTS_MSG_SUCCESSFULLY_ATTACHED&quot;], &quot;success&quot;);
            this.actionSheetOpen ? this.actionSheetController.dismiss(data) : this.payload.push(data);
          }).catch(error &#x3D;&gt; {
            this.loader.stopLoader();
            this.presentToast(this.texts[&quot;FRMELEMNTS_MSG_ERROR_WHILE_STORING_FILE&quot;]);
          })
        }).catch(error &#x3D;&gt; {
          this.loader.stopLoader();
          this.presentToast(this.texts[&quot;FRMELEMNTS_MSG_ERROR_WHILE_STORING_FILE&quot;]);
        })
      }
    }).catch(error &#x3D;&gt; { })
  }

  checkForFileSizeRestriction(filePath): Promise&lt;Boolean&gt; {
    return new Promise((resolve, reject) &#x3D;&gt; {
      this.file.resolveLocalFilesystemUrl(filePath).then(success &#x3D;&gt; {
        success.getMetadata((metadata) &#x3D;&gt; {
          if (metadata.size &gt; localStorageConstants.FILE_LIMIT) {
            this.presentToast(this.texts[&quot;FRMELEMNTS_LBL_FILE_SIZE_EXCEEDED&quot;],&#x27;danger&#x27;, 5000);
            reject(false)
          } else  {
            resolve(true)
          }
        })
      }).catch(error &#x3D;&gt; {
        reject(false)
      })
    })
  }

  copyFileToLocalDir(namePath, currentName, newFileName, completeFilePath) {
    this.file.copyFile(namePath, currentName, this.directoryPath(), newFileName).then(
      (success) &#x3D;&gt; {
        const data &#x3D; {
          name: newFileName,
          type: this.mimeType(newFileName),
          isUploaded: false,
          url: &quot;&quot;,
        };
        this.presentToast(this.texts[&quot;FRMELEMNTS_MSG_SUCCESSFULLY_ATTACHED&quot;], &quot;success&quot;);
        this.actionSheetOpen ? this.actionSheetController.dismiss(data) : this.payload.push(data);
      },
      (error) &#x3D;&gt; {
        this.writeFileToPrivateFolder(completeFilePath);
        // this.presentToast(this.texts[&quot;FRMELEMNTS_MSG_ERROR_WHILE_STORING_FILE&quot;]);
      }
    );
  }

  async presentToast(text, color &#x3D; &quot;danger&quot;, duration &#x3D; 3000) {
    const toast &#x3D; await this.toastController.create({
      message: text,
      position: &quot;top&quot;,
      duration: duration,
      color: color,
    });
    toast.present();
  }

  async openFile(path?) {
    try {
      const file &#x3D; await this.chooser.getFile(&#x27;application/pdf&#x27;);
      let sizeOftheFile: number &#x3D; file.data.length
      if (sizeOftheFile &gt; localStorageConstants.FILE_LIMIT) {
        this.actionSheetController.dismiss();
        this.presentToast(this.texts[&quot;FRMELEMNTS_MSG_ERROR_FILE_SIZE_LIMIT&quot;]);
      } else {
        const pathToWrite &#x3D; path ? path :this.directoryPath();
        const newFileName &#x3D; this.createFileName(file.name)
        const writtenFile &#x3D; await this.file.writeFile(pathToWrite, newFileName, file.data.buffer)
        if (writtenFile.isFile) {
          const data &#x3D; {
            name: newFileName,
            type: this.mimeType(newFileName),
            isUploaded: false,
            url: &quot;&quot;,
          };
          this.presentToast(this.texts[&quot;FRMELEMNTS_MSG_SUCCESSFULLY_ATTACHED&quot;], &quot;success&quot;);
          this.actionSheetOpen ? this.actionSheetController.dismiss(data) : this.payload.push(data);
        }
      }

    } catch (error) {
      this.presentToast(this.texts[&quot;FRMELEMNTS_MSG_ERROR_WHILE_STORING_FILE&quot;]);
    }
  }

  copyFile(filePath) {
    let correctPath &#x3D; filePath.substr(0, filePath.lastIndexOf(&quot;/&quot;) + 1);
    let currentName &#x3D; filePath.split(&quot;/&quot;).pop();
    currentName &#x3D; currentName.split(&quot;?&quot;)[0];
    this.copyFileToLocalDir(correctPath, currentName, this.createFileName(currentName), filePath);
  }

  createFileName(name) {
    let d &#x3D; new Date(),
      n &#x3D; d.getTime(),
      extentsion &#x3D; name.split(&quot;.&quot;).pop(),
      newFileName &#x3D; n + &quot;.&quot; + extentsion;
    return newFileName;
  }

  directoryPath(): string {
    if(this.actionSheetOpen &amp;&amp; this.storagePath){
      return this.storagePath;
    }else
    if (this.platform.is(&quot;ios&quot;)) {
      return this.file.documentsDirectory;
    } else {
      return this.file.externalDataDirectory;
    }
  }

  mimeType(fileName) {
    let ext &#x3D; fileName.split(&quot;.&quot;).pop();
    return FILE_EXTENSION_HEADERS[ext];
  }

  deleteFile(fileName) {
    return this.file.removeFile(this.directoryPath(), fileName);
  }

  async openAttachmentSource(type, payload) {
    let data: any &#x3D; &#x27;&#x27;;
    this.actionSheetOpen &#x3D; false;
    this.payload &#x3D; payload;
    switch (type) {
      case &#x27;openCamera&#x27;:
        this.takePicture(this.camera.PictureSourceType.CAMERA);
        break;
      case &#x27;openGallery&#x27;:
        this.takePicture(this.camera.PictureSourceType.PHOTOLIBRARY);
        break;
      case &#x27;openFiles&#x27;:
        this.openFile();
        break;
    }
  }
  openLocalLibrary(): void {
    const options: ImagePickerOptions &#x3D; {
      maximumImagesCount: 50,
      quality: 10,
    };
    this.imgPicker.getPictures(options).then((imageData) &#x3D;&gt; {
      for (const image of imageData) {
        this.actionSheetController.dismiss({imageData, multiple:true});
      }
    }).catch(err &#x3D;&gt; {
      console.log(err)
    });
  }
  async openAllFile(path?) {
    try {
      const file &#x3D; await this.chooser.getFile();
      let sizeOftheFile: number &#x3D; file.data.length
      if (sizeOftheFile &gt; localStorageConstants.FILE_LIMIT) {
        this.actionSheetController.dismiss();
        this.presentToast(this.texts[&quot;FRMELEMNTS_MSG_ERROR_FILE_SIZE_LIMIT&quot;]);
      } else {
        const pathToWrite &#x3D; path ? path :this.directoryPath();
        const newFileName &#x3D; this.createFileName(file.name)
        const writtenFile &#x3D; await this.file.writeFile(pathToWrite, newFileName, file.data.buffer)
        if (writtenFile.isFile) {
          const data &#x3D; {
            name: newFileName,
            type: this.mimeType(newFileName),
            isUploaded: false,
            url: &quot;&quot;,
          };
          this.presentToast(this.texts[&quot;FRMELEMNTS_MSG_SUCCESSFULLY_ATTACHED&quot;], &quot;success&quot;);
          this.actionSheetOpen ? this.actionSheetController.dismiss(data) : this.payload.push(data);
        }
      }

    } catch (error) {
      this.presentToast(this.texts[&quot;FRMELEMNTS_MSG_ERROR_WHILE_STORING_FILE&quot;]);
    }
  }
}</code></pre>
    </div>

</div>













                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'AttachmentService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
